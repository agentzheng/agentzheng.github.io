(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{355:function(e,n,i){"use strict";i.r(n);var r=i(1),a=Object(r.a)({},function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("p",[e._v("因为软件竞赛的项目会用到OpenCV for Android，所以就研究了一下如何在Android Studio上配置OpenCV4Android\n")]),e._v(" "),i("p",[e._v("环境概述：")]),e._v(" "),i("ol",[i("li",[e._v("Android Studio 2.3")]),e._v(" "),i("li",[e._v("OpenCV-2.4.11-android-sdk")])]),e._v(" "),i("p",[e._v("接下来主要是详细的讲解每一步的配置，然后再最后我会放上我做的一个示例项目")]),e._v(" "),i("p",[i("strong",[e._v("1.首先是下载OpenCV-2.4.11-android-sdk")])]),e._v(" "),i("p",[e._v("不知道为什么之前上Opencv官网发现Android部分挂了，找了半天没找着下载的地方，最后终于在SourceForge上找到了，所以为了方便大家不用到处找，我把文件传到七牛云了")]),e._v(" "),i("p",[i("a",{attrs:{href:"https://onhdz331f.bkt.clouddn.com/OpenCV-2.4.11-android-sdk.zip",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://onhdz331f.bkt.clouddn.com/OpenCV-2.4.11-android-sdk.zip"),i("OutboundLink")],1)]),e._v(" "),i("p",[e._v("如果不放心的话，大家也可以到opencv官网上去下载这个sdk。")]),e._v(" "),i("p",[i("strong",[e._v("2.依据博友gloomyfish的文章进行配置，博主的视频当中的操作是对的，但是他的文章有些错误，会导致配置失败，或者说的不太清楚的的地方，我下面会补充讲下")])]),e._v(" "),i("p",[i("a",{attrs:{href:"https://blog.csdn.net/jia20003/article/details/53126321",target:"_blank",rel:"noopener noreferrer"}},[e._v("OpenCV On Android开发 - Android Studio上环境配置"),i("OutboundLink")],1)]),e._v(" "),i("p",[e._v("(1)"),i("strong",[e._v("错误更正")]),e._v(" "),i("strong",[e._v("“SDK下面native文件下所有的文件都copy到你创建好的项目libs目录下”这句话有错，应该改为SDK\\native\\libs文件下所有的文件都copy到项目libs目录下,这样问题解决")])]),e._v(" "),i("p",[e._v("(2)"),i("strong",[e._v("错误更正")]),e._v(" "),i("strong",[e._v("最后要加到build.gradle(Module:app)的那句")])]),e._v(" "),i("div",{staticClass:"language-gradle extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("compile fileTree(dir: \"$buildDir/native-libs\", include: 'native-libs.jar')\n")])])]),i("p",[i("strong",[e._v("应该是要放到build.gradle(Module:app)中的dependencies{}里面，而且不是像他所说的第一行，而是应该放在第二行，也就是这句")])]),e._v(" "),i("div",{staticClass:"language-gradle extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("compile fileTree(include: ['*.jar'], dir: 'libs')\n")])])]),i("p",[i("strong",[e._v("的下一行。")])]),e._v(" "),i("p",[i("strong",[e._v("(3)说得不太清楚的")]),e._v("：要放到build.gradle(Module:app)的这部分代码，是直接加在dependencies{}后面的。")]),e._v(" "),i("div",{staticClass:"language-gradle extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("task nativeLibsToJar(type: Jar, description: 'create a jar archive of the native libs') {\n    destinationDir file(\"$buildDir/native-libs\")\n    baseName 'native-libs'\n    from fileTree(dir: 'libs', include: '**/*.so')\n    into 'lib/'\n}\n\ntasks.withType(JavaCompile) {\n    compileTask -> compileTask.dependsOn(nativeLibsToJar)\n}\n")])])]),i("p",[e._v("下面给出完整的build.gradle(Module:app)文件，并加上了注释，表现了应该如何更改")]),e._v(" "),i("div",{staticClass:"language-gradle extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 25//在不同的android版本中，sdk版本不同\n    buildToolsVersion \"25.0.2\"\n    defaultConfig {\n        applicationId \"com.example.a18350.opencvtest\"\n        minSdkVersion 19\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    compile fileTree(dir: \"$buildDir/native-libs\", include: 'native-libs.jar')//那句话是加在这里的，而不是加在第一行\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    compile 'com.android.support:appcompat-v7:25.3.1'\n    compile 'com.android.support.constraint:constraint-layout:1.0.2'\n    testCompile 'junit:junit:4.12'\n    compile project(':openCVLibrary2411')\n}\n//请将两个task放在这里，也就是dependencies后面\ntask nativeLibsToJar(type: Jar, description: 'create a jar archive of the native libs') {\n    destinationDir file(\"$buildDir/native-libs\")\n    baseName 'native-libs'\n    from fileTree(dir: 'libs', include: '**/*.so')\n    into 'lib/'\n}\n\ntasks.withType(JavaCompile) {\n    compileTask -> compileTask.dependsOn(nativeLibsToJar)\n}\n")])])]),i("p",[e._v("**(4)**请注意，"),i("strong",[e._v("还应该要更新build.gradle(module:OpenCVLibrary2411)信息")]),e._v("，打开build.gradle(module:OpenCVLibrary2411)，修改文件中的")]),e._v(" "),i("ol",[i("li",[e._v("compileSdkVersion")]),e._v(" "),i("li",[e._v("buildToolsVersion")]),e._v(" "),i("li",[e._v("minSdkVersion")]),e._v(" "),i("li",[e._v("targetSdkVersion")])]),e._v(" "),i("p",[e._v("将"),i("strong",[e._v("其内容与build.gradle(Module:app)中信息相一致")]),e._v(",这里做的事情其实是调整sdk的版本，使得编译opencv的sdk，构建工具的版本和app相同。")]),e._v(" "),i("p",[i("img",{attrs:{src:"https://s1.ax2x.com/2018/05/16/xbaOR.png",alt:"img"}})]),e._v(" "),i("p",[e._v("大功告成，这里放上运行成功的项目地址")]),e._v(" "),i("p",[i("a",{attrs:{href:"https://git.oschina.net/ylzheng/opencv4android_example",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://git.oschina.net/ylzheng/opencv4android_example"),i("OutboundLink")],1)])])},[],!1,null,null,null);n.default=a.exports}}]);